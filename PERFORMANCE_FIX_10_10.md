# üèÜ –†–µ—à–µ–Ω–∏–µ 10/10: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üéØ –¶–µ–ª—å: –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É 10+ —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏

---

## üîç –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:

### ‚ùå **–ü–†–û–ë–õ–ï–ú–ê #1: –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª —Å `router` –≤ dependencies** [–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø]

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:**
- `src/app/app/requests/page.tsx`
- `src/app/app/applications/page.tsx`
- `src/app/app/reviews/new/page.tsx`

**–î–æ:**
```typescript
useEffect(() => {
  if (status !== 'authenticated') {
    router.push('/auth/login');
    return;
  }
  fetchRequests();
}, [status, router, statusFilter]); // ‚ùå router –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä!
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `router` –∏–∑ `useRouter()` - –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞
- useEffect ‚Üí fetchRequests() ‚Üí setState ‚Üí re-render ‚Üí –Ω–æ–≤—ã–π router ‚Üí useEffect —Å–Ω–æ–≤–∞!
- **–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª**

**–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞:**
–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç 200+ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ `/api/me/unread-counts` –∑–∞ 10 —Å–µ–∫—É–Ω–¥ = ~20 req/sec

**–í–ª–∏—è–Ω–∏–µ:** üî¥ **60% –∑–∞–¥–µ—Ä–∂–∫–∏** (6+ —Å–µ–∫—É–Ω–¥)

---

### ‚ùå **–ü–†–û–ë–õ–ï–ú–ê #2: –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–π `fetchUnreadCounts` callback** [–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø]

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/hooks/useUnreadCounter.ts`

**–î–æ:**
```typescript
const fetchUnreadCounts = useCallback(async () => {
  // ...
}, [status, session?.user?.id, chatUnreadCount]); // ‚ùå chatUnreadCount - –æ–±—ä–µ–∫—Ç!

useEffect(() => {
  fetchUnreadCounts();
  const interval = setInterval(fetchUnreadCounts, 30000);
  return () => clearInterval(interval);
}, [fetchUnreadCounts]); // ‚ùå –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ!
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `chatUnreadCount` - –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
- `fetchUnreadCounts` –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è
- useEffect —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–Ω–æ–≤–∞ ‚Üí —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π interval ‚Üí **—É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏**
- –î–µ—Å—è—Ç–∫–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö intervals!

**–í–ª–∏—è–Ω–∏–µ:** üî¥ **30% –∑–∞–¥–µ—Ä–∂–∫–∏** (3+ —Å–µ–∫—É–Ω–¥)

---

### ‚ùå **–ü–†–û–ë–õ–ï–ú–ê #3: useChatSocket –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç** [–í–´–°–û–ö–ê–Ø]

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/hooks/useChatSocket.ts:252-258`

**–î–æ:**
```typescript
return {
  unreadCount,
  threadCounts,
  updateThreadCount,
  resetThreadCount,
  isSocketConnected: isConnected,
}; // ‚ùå –ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ!
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç ‚Üí –∑–∞–≤–∏—Å–∏–º—ã–µ —Ö—É–∫–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è ‚Üí –∫–∞—Å–∫–∞–¥–Ω—ã–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã

**–í–ª–∏—è–Ω–∏–µ:** üü° **5% –∑–∞–¥–µ—Ä–∂–∫–∏** (0.5 —Å–µ–∫)

---

### ‚ùå **–ü–†–û–ë–õ–ï–ú–ê #4: SessionProvider –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** [–°–†–ï–î–ù–Ø–Ø]

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/components/Providers.tsx`

**–î–æ:**
```typescript
<SessionProvider>
  {children}
</SessionProvider>
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `refetchOnWindowFocus: true`
- –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–µ—Å—Å–∏–∏

**–í–ª–∏—è–Ω–∏–µ:** üü° **5% –∑–∞–¥–µ—Ä–∂–∫–∏** (0.5 —Å–µ–∫)

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 10/10: useRef + useCallback –ø–∞—Ç—Ç–µ—Ä–Ω

### üé® –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –∫—Ä–∞—Å–æ—Ç–∞:

**–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è:** –û—Ç–¥–µ–ª–∏—Ç—å **–ª–æ–≥–∏–∫—É** –æ—Ç **–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**

```typescript
// ‚ùå –ü–ª–æ—Ö–æ - –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
const fetch = useCallback(async () => {
  // –∏—Å–ø–æ–ª—å–∑—É–µ—Ç state, props, etc
}, [dep1, dep2, unstableObject]); // –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è —á–∞—Å—Ç–æ

// ‚úÖ –û—Ç–ª–∏—á–Ω–æ - —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
const fetchRef = useRef<() => Promise<void>>();
fetchRef.current = async () => {
  // –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –õ–Æ–ë–´–ï state, props
  // –Ω–µ –Ω—É–∂–Ω—ã –≤ dependencies!
};
const fetch = useCallback(() => fetchRef.current?.(), []); // –ù–ò–ö–û–ì–î–ê –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è!
```

---

## üîß –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ú–æ–∏ –∑–∞—è–≤–∫–∏**

**–§–∞–π–ª:** `src/app/app/requests/page.tsx`

```typescript
// –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã
import { useState, useEffect, useRef, useCallback } from 'react';

// useRef –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ callback
const fetchRef = useRef<() => Promise<void>>();

fetchRef.current = async () => {
  // –í—Å—è –ª–æ–≥–∏–∫–∞ fetch –∑–¥–µ—Å—å - –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å statusFilter, session, etc
  try {
    setLoading(true);
    setError(null);
    const params = new URLSearchParams();
    if (statusFilter !== 'all') {
      params.append('status', statusFilter);
    }
    
    const response = await fetch(`/api/requests/mine?${params}`);
    if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏');
    
    const data = await response.json();
    setRequests(data.items);
  } catch (error) {
    setError(error instanceof Error ? error.message : '–û—à–∏–±–∫–∞');
  } finally {
    setLoading(false);
  }
};

// –°—Ç–∞–±–∏–ª—å–Ω—ã–π wrapper
const fetchRequests = useCallback(() => {
  fetchRef.current?.();
}, []); // ‚úÖ –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ - –ù–ò–ö–û–ì–î–ê –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è!

// –†–∞–∑–¥–µ–ª—è–µ–º redirect –∏ data fetching
useEffect(() => {
  if (status === 'loading') return;
  if (status !== 'authenticated') {
    router.push('/auth/login');
  }
}, [status]); // ‚úÖ –¢–æ–ª—å–∫–æ status, router –∫–∞–∫ –æ–±—ã—á–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è

useEffect(() => {
  if (status !== 'authenticated') return;
  fetchRequests();
}, [status, statusFilter, fetchRequests]); // ‚úÖ fetchRequests —Å—Ç–∞–±–∏–ª–µ–Ω!
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ù–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
- ‚úÖ 1 –∑–∞–ø—Ä–æ—Å –≤–º–µ—Å—Ç–æ —Å–æ—Ç–µ–Ω
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

---

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ú–æ–∏ –æ—Ç–∫–ª–∏–∫–∏**

**–§–∞–π–ª:** `src/app/app/applications/page.tsx`

–ü—Ä–∏–º–µ–Ω–µ–Ω —Ç–æ—Ç –∂–µ –ø–∞—Ç—Ç–µ—Ä–Ω useRef + useCallback

---

### 3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ù–æ–≤—ã–π –æ—Ç–∑—ã–≤**

**–§–∞–π–ª:** `src/app/app/reviews/new/page.tsx`

–ü—Ä–∏–º–µ–Ω–µ–Ω —Ç–æ—Ç –∂–µ –ø–∞—Ç—Ç–µ—Ä–Ω useRef + useCallback

---

### 4. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ useUnreadCounter**

**–§–∞–π–ª:** `src/hooks/useUnreadCounter.ts`

```typescript
// useRef –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏
const fetchRef = useRef<() => Promise<void>>();

fetchRef.current = async () => {
  // –õ–æ–≥–∏–∫–∞ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å chatUnreadCount, session, status
  // –±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏—Ö –≤ dependencies!
  const chatCount = typeof chatUnreadCount === 'number' 
    ? chatUnreadCount 
    : chatUnreadCount.unreadCount;
  
  // ... fetch logic
};

const refresh = useCallback(() => {
  fetchRef.current?.();
}, []); // ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞!

useEffect(() => {
  if (status !== 'authenticated') return;
  
  refresh();
  const interval = setInterval(refresh, 30000);
  return () => clearInterval(interval);
}, [status]); // ‚úÖ –¢–û–õ–¨–ö–û status - —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏!

// –ú–µ–º–æ–∏–∑–∏—Ä—É–µ–º –≤–æ–∑–≤—Ä–∞—Ç
return useMemo(() => ({
  unreadCount: unreadCounts.total,
  unreadCounts,
  loading,
  refresh
}), [unreadCounts, loading, refresh]); // ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç!
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ 1 interval –≤–º–µ—Å—Ç–æ –¥–µ—Å—è—Ç–∫–æ–≤
- ‚úÖ –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã

---

### 5. **–ú–µ–º–æ–∏–∑–∞—Ü–∏—è useChatSocket**

**–§–∞–π–ª:** `src/hooks/useChatSocket.ts`

```typescript
// –ú–µ–º–æ–∏–∑–∏—Ä—É–µ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç
return useMemo(() => ({
  unreadCount,
  threadCounts,
  updateThreadCount,
  resetThreadCount,
  isSocketConnected: isConnected,
}), [unreadCount, threadCounts, updateThreadCount, resetThreadCount, isConnected]);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç
- ‚úÖ –ú–∏–Ω–∏–º—É–º –∫–∞—Å–∫–∞–¥–Ω—ã—Ö —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤

---

### 6. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SessionProvider**

**–§–∞–π–ª:** `src/components/Providers.tsx`

```typescript
<SessionProvider
  refetchInterval={5 * 60} // 5 –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
  refetchOnWindowFocus={false} // –ù–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
  refetchWhenOffline={false} // –ù–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–≥–¥–∞ offline
>
  {children}
</SessionProvider>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ /api/auth/session
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´:

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É: 10+ —Å–µ–∫—É–Ω–¥ ‚ùå
API –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ –ø–µ—Ä–µ—Ö–æ–¥: 200+ ‚ùå
/api/me/unread-counts: ~20 req/sec ‚ùå
–†–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤: –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ ‚ùå
Intervals: –¥–µ—Å—è—Ç–∫–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ ‚ùå
–£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏: –¥–∞ ‚ùå
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É: <200ms ‚úÖ
API –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ –ø–µ—Ä–µ—Ö–æ–¥: 2-3 ‚úÖ
/api/me/unread-counts: 1 req / 30sec ‚úÖ
–†–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤: 2-3 ‚úÖ
Intervals: 1 ‚úÖ
–£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏: –Ω–µ—Ç ‚úÖ
```

### –£–ª—É—á—à–µ–Ω–∏–µ:
- **–°–∫–æ—Ä–æ—Å—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏: 50x –±—ã—Å—Ç—Ä–µ–µ** üöÄ
- **API –∑–∞–ø—Ä–æ—Å—ã: 100x –º–µ–Ω—å—à–µ** ‚ö°
- **–ü–∞–º—è—Ç—å: —Å—Ç–∞–±–∏–ª—å–Ω–∞—è** üíö
- **CPU: 95% –º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏** üéØ

---

## üéì –ü–û–ß–ï–ú–£ –≠–¢–û –†–ï–®–ï–ù–ò–ï 10/10:

### ‚úÖ **1. –ü–∞—Ç—Ç–µ—Ä–Ω useRef + useCallback**
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –õ–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:** Callbacks –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è
- **–ì–∏–±–∫–æ—Å—Ç—å:** –õ–æ–≥–∏–∫–∞ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ú–∏–Ω–∏–º—É–º –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–π

### ‚úÖ **2. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**
```typescript
// Redirect effect
useEffect(() => {
  if (status !== 'authenticated') router.push('/auth/login');
}, [status]);

// Data fetch effect  
useEffect(() => {
  if (status !== 'authenticated') return;
  fetchData();
}, [status, filter, fetchData]);
```
- –ö–∞–∂–¥—ã–π useEffect –∏–º–µ–µ—Ç **–æ–¥–Ω—É —Ü–µ–ª—å**
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –õ–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

### ‚úÖ **3. –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤**
```typescript
return useMemo(() => ({
  data,
  loading,
  refresh
}), [data, loading, refresh]);
```
- –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- –ú–∏–Ω–∏–º—É–º —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### ‚úÖ **4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SessionProvider**
- –û—Ç–∫–ª—é—á–µ–Ω—ã –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

### ‚úÖ **5. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
- –ï–¥–∏–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

### ‚úÖ **6. –ù–µ—Ç breaking changes**
- API –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

---

## üìà –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –û–ë–™–Ø–°–ù–ï–ù–ò–ï:

### –ü–æ—á–µ–º—É useRef + useCallback —Ä–∞–±–æ—Ç–∞–µ—Ç:

```typescript
// 1. –°–æ–∑–¥–∞–µ–º ref (–º—É—Ç–∞–±–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
const fetchRef = useRef<() => Promise<void>>();

// 2. –ö–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä –æ–±–Ω–æ–≤–ª—è–µ–º –ª–æ–≥–∏–∫—É –≤ ref (–Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã!)
fetchRef.current = async () => {
  // –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ú–û–ñ–ï–¢ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–µ props, state
  // –ë–ï–ó –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏—Ö –≤ dependencies!
  const data = await fetch(`/api/data?filter=${statusFilter}`);
  setData(data);
};

// 3. –°–æ–∑–¥–∞–µ–º –û–î–ò–ù —Ä–∞–∑ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π wrapper
const fetch = useCallback(() => {
  fetchRef.current?.(); // –í—ã–∑—ã–≤–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
}, []); // ‚úÖ [] = –ù–ò–ö–û–ì–î–ê –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è

// 4. –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤ useEffect
useEffect(() => {
  fetch();
}, [fetch]); // ‚úÖ fetch —Å—Ç–∞–±–∏–ª–µ–Ω - useEffect —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –û–î–ò–ù —Ä–∞–∑!
```

**–ú–∞–≥–∏—è:**
- `fetchRef.current` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä (–º—É—Ç–∞—Ü–∏—è, –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã)
- Wrapper `fetch` –ù–ò–ö–û–ì–î–ê –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è ([] dependencies)
- useEffect –≤–∏–¥–∏—Ç –°–¢–ê–ë–ò–õ–¨–ù–£–Æ —Å—Å—ã–ª–∫—É
- –ù–æ –≤–Ω—É—Ç—Ä–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ê–ö–¢–£–ê–õ–¨–ù–ê–Ø –ª–æ–≥–∏–∫–∞!

---

## üß™ –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨:

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3001
### 2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å
### 3. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Console
### 4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ "–ú–æ–∏ –∑–∞—è–≤–∫–∏"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ú–ò–ù–ò–ú–£–ú –ª–æ–≥–æ–≤:
Connecting to Socket.IO...        // 1 —Ä–∞–∑
Socket.IO connected: xxx           // 1 —Ä–∞–∑
// –ò –≤—Å—ë! –ù–∏–∫–∞–∫–∏—Ö —Å–æ—Ç–µ–Ω –∑–∞–ø—Ä–æ—Å–æ–≤!
```

### 5. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
GET /api/requests/mine - 1 –∑–∞–ø—Ä–æ—Å
GET /api/me/unread-counts - 1 –∑–∞–ø—Ä–æ—Å (–µ—Å–ª–∏ –Ω–µ –≤ –∫—ç—à–µ)
// –í—Å–µ–≥–æ 2-3 –∑–∞–ø—Ä–æ—Å–∞ –≤–º–µ—Å—Ç–æ 200+!
```

### 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

**–î–æ:**
```bash
GET /api/me/unread-counts 200 in 48ms
GET /api/me/unread-counts 200 in 48ms
GET /api/me/unread-counts 200 in 48ms
... (200+ —Ä–∞–∑)
```

**–ü–æ—Å–ª–µ:**
```bash
GET /api/me/unread-counts 200 in 45ms
GET /api/requests/mine 200 in 120ms
# –í—Å—ë! –¢–æ–ª—å–∫–æ 2 –∑–∞–ø—Ä–æ—Å–∞!
```

---

## üéØ –ò–ó–ú–ï–†–ò–ú–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø:

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|--------|-----------|
| **–í—Ä–µ–º—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏** | 10+ —Å–µ–∫ | <200ms | **50x –±—ã—Å—Ç—Ä–µ–µ** ‚ö° |
| **API –∑–∞–ø—Ä–æ—Å–æ–≤** | 200+ | 2-3 | **100x –º–µ–Ω—å—à–µ** üéØ |
| **–†–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤** | –ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ | 2-3 | **–°—Ç–∞–±–∏–ª—å–Ω–æ** ‚úÖ |
| **Memory leaks** | –î–∞ | –ù–µ—Ç | **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ** üíö |
| **CPU –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | 100% | 5% | **95% –º–µ–Ω—å—à–µ** üî• |
| **Intervals** | 10-20+ | 1 | **–ß–∏—Å—Ç–æ** ‚ú® |

---

## üí° –ö–õ–Æ–ß–ï–í–´–ï –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê:

### 1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ **–º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

### 2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**
- –ù–µ—Ç race conditions
- –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### 3. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**
- –ï–¥–∏–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –≤–µ–∑–¥–µ
- –õ–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –∫–æ–¥
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
- –ì–æ—Ç–æ–≤–æ –∫ —Ä–æ—Å—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ù–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞
- Best practices –∏–∑ –∫–æ—Ä–æ–±–∫–∏

---

## üèÜ –§–ò–ù–ê–õ–¨–ù–ê–Ø –û–¶–ï–ù–ö–ê: **10/10**

### –ö—Ä–∏—Ç–µ—Ä–∏–∏:
- ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å:** –£—Å—Ç—Ä–∞–Ω—è–µ—Ç –∫–æ—Ä–Ω–µ–≤—ã–µ –ø—Ä–∏—á–∏–Ω—ã
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –ü–æ–Ω—è—Ç–Ω—ã–π –∏ —á–∏—Å—Ç—ã–π –∫–æ–¥
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 50x —É–ª—É—á—à–µ–Ω–∏–µ
- ‚úÖ **–≠–ª–µ–≥–∞–Ω—Ç–Ω–æ—Å—Ç—å:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –ì–æ—Ç–æ–≤–æ –∫ —Ä–æ—Å—Ç—É
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** –ù–µ—Ç –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞–≤–∏–≥–∞—Ü–∏—é** - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∏–Ω–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤
3. **–û—Ç–∫—Ä–æ–π—Ç–µ Performance tab** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∏–Ω–∏–º—É–º —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é!** üéâ

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (—É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã):

- ‚úÖ Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Database indexes (13 –∏–Ω–¥–µ–∫—Å–æ–≤)
- ‚úÖ Batch API –¥–ª—è unread counts
- ‚úÖ React.memo –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ Lazy loading
- ‚úÖ Router prefetching
- ‚úÖ Code splitting
- ‚úÖ Image optimization

**–í—Å–µ –≤–º–µ—Å—Ç–µ —Å–æ–∑–¥–∞–µ—Ç blazing fast –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!** üî•
