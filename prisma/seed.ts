import { PrismaClient } from '@prisma/client'
import { hash } from 'bcryptjs'

const prisma = new PrismaClient()

async function main() {
  console.log('üå± Seeding categories...')

  const categories = [
    { slug: 'psychologist', name: '–ü—Å–∏—Ö–æ–ª–æ–≥' },
    { slug: 'nutritionist', name: '–ù—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥' },
    { slug: 'personal-trainer', name: '–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä' },
    { slug: 'health-coach', name: '–ó–¥–æ—Ä–æ–≤—å–µ-–∫–æ—É—á' },
    { slug: 'physiotherapist', name: '–§–∏–∑–∏–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç' },
  ]

  for (const category of categories) {
    await prisma.category.upsert({
      where: { slug: category.slug },
      update: {},
      create: category,
    })
  }

  console.log('‚úÖ Categories seeded successfully!')

  console.log('üå± Seeding specialists...')

  // –°–æ–∑–¥–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤
  const specialists = [
    // –û–Ω–ª–∞–π–Ω —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã
    {
      email: 'anna.psychologist@example.com',
      displayName: '–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞',
      bio: '–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Å–∏—Ö–æ–ª–æ–≥ —Å 8-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ-–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–π —Ç–µ—Ä–∞–ø–∏–∏ –∏ —Ä–∞–±–æ—Ç–µ —Å —Ç—Ä–µ–≤–æ–∂–Ω—ã–º–∏ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏.',
      experienceYears: 8,
      priceMinCents: 5000,
      priceMaxCents: 8000,
      onlineOnly: true,
      verified: true,
      categories: ['psychologist']
    },
    {
      email: 'maria.nutritionist@example.com',
      displayName: '–ú–∞—Ä–∏—è –°–æ–∫–æ–ª–æ–≤–∞',
      bio: '–ù—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥ –∏ –¥–∏–µ—Ç–æ–ª–æ–≥. –ü–æ–º–æ–≥–∞—é —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Ü–∏–æ–Ω –ø–∏—Ç–∞–Ω–∏—è –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤–∞—à–∏—Ö —Ü–µ–ª–µ–π.',
      experienceYears: 5,
      priceMinCents: 3000,
      priceMaxCents: 6000,
      onlineOnly: true,
      verified: true,
      categories: ['nutritionist']
    },
    {
      email: 'alex.trainer@example.com',
      displayName: '–ê–ª–µ–∫—Å–µ–π –ö–æ–∑–ª–æ–≤',
      bio: '–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä –∏ —Ñ–∏—Ç–Ω–µ—Å-–∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä. –°–æ–∑–¥–∞—é –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –¥–ª—è –ª—é–±–æ–≥–æ —É—Ä–æ–≤–Ω—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏.',
      experienceYears: 6,
      priceMinCents: 4000,
      priceMaxCents: 7000,
      onlineOnly: true,
      verified: false,
      categories: ['personal-trainer']
    },
    {
      email: 'elena.coach@example.com',
      displayName: '–ï–ª–µ–Ω–∞ –ú–æ—Ä–æ–∑–æ–≤–∞',
      bio: '–ó–¥–æ—Ä–æ–≤—å–µ-–∫–æ—É—á —Å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º. –ü–æ–º–æ–≥–∞—é –∏–∑–º–µ–Ω–∏—Ç—å –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏ –∏ –¥–æ—Å—Ç–∏—á—å –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è.',
      experienceYears: 10,
      priceMinCents: 6000,
      priceMaxCents: 10000,
      onlineOnly: true,
      verified: true,
      categories: ['health-coach']
    },
    {
      email: 'dmitry.physio@example.com',
      displayName: '–î–º–∏—Ç—Ä–∏–π –í–æ–ª–∫–æ–≤',
      bio: '–§–∏–∑–∏–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç —Å 12-–ª–µ—Ç–Ω–∏–º —Å—Ç–∞–∂–µ–º. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ —Ä–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏–∏ –ø–æ—Å–ª–µ —Ç—Ä–∞–≤–º –∏ –ª–µ—á–µ–Ω–∏–∏ –æ–ø–æ—Ä–Ω–æ-–¥–≤–∏–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∞–ø–ø–∞—Ä–∞—Ç–∞.',
      experienceYears: 12,
      priceMinCents: 7000,
      priceMaxCents: 12000,
      onlineOnly: true,
      verified: true,
      categories: ['physiotherapist']
    },
    // –û—Ñ–ª–∞–π–Ω —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã
    {
      email: 'olga.psychologist.moscow@example.com',
      displayName: '–û–ª—å–≥–∞ –ù–æ–≤–∏–∫–æ–≤–∞',
      bio: '–ü—Å–∏—Ö–æ–ª–æ–≥-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç. –†–∞–±–æ—Ç–∞—é —Å —Å–µ–º–µ–π–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∏ –¥–µ—Ç—Å–∫–æ–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏–µ–π. –ü—Ä–∏–Ω–∏–º–∞—é –≤ —Ü–µ–Ω—Ç—Ä–µ –ú–æ—Å–∫–≤—ã.',
      experienceYears: 7,
      priceMinCents: 6000,
      priceMaxCents: 9000,
      onlineOnly: false,
      city: '–ú–æ—Å–∫–≤–∞',
      verified: true,
      categories: ['psychologist']
    },
    {
      email: 'sergey.nutritionist.spb@example.com',
      displayName: '–°–µ—Ä–≥–µ–π –õ–µ–±–µ–¥–µ–≤',
      bio: '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥. –†–∞–±–æ—Ç–∞—é —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞–º–∏ –∏ –ª—é–±–∏—Ç–µ–ª—è–º–∏ —Ñ–∏—Ç–Ω–µ—Å–∞.',
      experienceYears: 9,
      priceMinCents: 5000,
      priceMaxCents: 8000,
      onlineOnly: false,
      city: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',
      verified: true,
      categories: ['nutritionist']
    },
    {
      email: 'irina.trainer.moscow@example.com',
      displayName: '–ò—Ä–∏–Ω–∞ –ö—É–∑–Ω–µ—Ü–æ–≤–∞',
      bio: '–§–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–Ω–µ—Ä –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ –π–æ–≥–µ. –ü—Ä–æ–≤–æ–∂—É –≥—Ä—É–ø–ø–æ–≤—ã–µ –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∑–∞–Ω—è—Ç–∏—è –≤ —Å–ø–æ—Ä—Ç–∑–∞–ª–µ.',
      experienceYears: 4,
      priceMinCents: 3500,
      priceMaxCents: 5500,
      onlineOnly: false,
      city: '–ú–æ—Å–∫–≤–∞',
      verified: false,
      categories: ['personal-trainer']
    },
    {
      email: 'vladimir.coach.spb@example.com',
      displayName: '–í–ª–∞–¥–∏–º–∏—Ä –°–º–∏—Ä–Ω–æ–≤',
      bio: '–ó–¥–æ—Ä–æ–≤—å–µ-–∫–æ—É—á –∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∑–¥–æ—Ä–æ–≤–æ–º—É –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏. –ö–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É—é –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –¥–æ–ª–≥–æ–ª–µ—Ç–∏—è –∏ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏.',
      experienceYears: 15,
      priceMinCents: 8000,
      priceMaxCents: 12000,
      onlineOnly: false,
      city: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',
      verified: true,
      categories: ['health-coach']
    },
    {
      email: 'natalia.physio.moscow@example.com',
      displayName: '–ù–∞—Ç–∞–ª—å—è –§–µ–¥–æ—Ä–æ–≤–∞',
      bio: '–§–∏–∑–∏–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç –∏ –º–∞—Å—Å–∞–∂–∏—Å—Ç. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ –ª–µ—á–µ–Ω–∏–∏ –±–æ–ª–µ–π –≤ —Å–ø–∏–Ω–µ –∏ —Å—É—Å—Ç–∞–≤–∞—Ö.',
      experienceYears: 11,
      priceMinCents: 6000,
      priceMaxCents: 10000,
      onlineOnly: false,
      city: '–ú–æ—Å–∫–≤–∞',
      verified: true,
      categories: ['physiotherapist']
    },
    // –°–º–µ—à–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã (–æ–Ω–ª–∞–π–Ω + –æ—Ñ–ª–∞–π–Ω)
    {
      email: 'alexander.psychologist.mixed@example.com',
      displayName: '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–æ–ø–æ–≤',
      bio: '–ü—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç —Å 13-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º. –†–∞–±–æ—Ç–∞—é –∫–∞–∫ –æ–Ω–ª–∞–π–Ω, —Ç–∞–∫ –∏ –æ—á–Ω–æ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ –¥–µ–ø—Ä–µ—Å—Å–∏–∏ –∏ –ü–¢–°–†.',
      experienceYears: 13,
      priceMinCents: 7000,
      priceMaxCents: 11000,
      onlineOnly: false,
      city: '–ú–æ—Å–∫–≤–∞',
      verified: true,
      categories: ['psychologist', 'health-coach']
    },
    {
      email: 'tatyana.nutritionist.mixed@example.com',
      displayName: '–¢–∞—Ç—å—è–Ω–∞ –û—Ä–ª–æ–≤–∞',
      bio: '–î–∏–µ—Ç–æ–ª–æ–≥ –∏ –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥. –ö–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É—é –æ–Ω–ª–∞–π–Ω –∏ –ø—Ä–∏–Ω–∏–º–∞—é –≤ –∫–ª–∏–Ω–∏–∫–µ. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ –ª–µ—á–µ–±–Ω–æ–º –ø–∏—Ç–∞–Ω–∏–∏.',
      experienceYears: 6,
      priceMinCents: 4000,
      priceMaxCents: 7000,
      onlineOnly: false,
      city: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',
      verified: true,
      categories: ['nutritionist']
    },
    {
      email: 'mikhail.trainer.mixed@example.com',
      displayName: '–ú–∏—Ö–∞–∏–ª –°–æ–∫–æ–ª–æ–≤',
      bio: '–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä –∏ —Ä–µ–∞–±–∏–ª–∏—Ç–æ–ª–æ–≥. –†–∞–±–æ—Ç–∞—é —Å –ª—é–¥—å–º–∏ –ø–æ—Å–ª–µ —Ç—Ä–∞–≤–º. –ü—Ä–æ–≤–æ–∂—É –∑–∞–Ω—è—Ç–∏—è –æ–Ω–ª–∞–π–Ω –∏ –≤ –∑–∞–ª–µ.',
      experienceYears: 8,
      priceMinCents: 4500,
      priceMaxCents: 7500,
      onlineOnly: false,
      city: '–ú–æ—Å–∫–≤–∞',
      verified: false,
      categories: ['personal-trainer', 'physiotherapist']
    },
    {
      email: 'ekaterina.coach.mixed@example.com',
      displayName: '–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –ú–µ–¥–≤–µ–¥–µ–≤–∞',
      bio: '–ó–¥–æ—Ä–æ–≤—å–µ-–∫–æ—É—á –∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ç–∏–≤–Ω–æ–π –º–µ–¥–∏—Ü–∏–Ω–µ. –ü–æ–º–æ–≥–∞—é –Ω–∞–π—Ç–∏ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Ä–∞–±–æ—Ç–æ–π –∏ –∑–¥–æ—Ä–æ–≤—å–µ–º.',
      experienceYears: 14,
      priceMinCents: 9000,
      priceMaxCents: 15000,
      onlineOnly: false,
      city: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',
      verified: true,
      categories: ['health-coach']
    },
    {
      email: 'andrey.physio.mixed@example.com',
      displayName: '–ê–Ω–¥—Ä–µ–π –ö–æ–∑–ª–æ–≤',
      bio: '–§–∏–∑–∏–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç –∏ –º–∞–Ω—É–∞–ª—å–Ω—ã–π —Ç–µ—Ä–∞–ø–µ–≤—Ç. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ –ª–µ—á–µ–Ω–∏–∏ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–∞–≤–º –∏ —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏—Ö –±–æ–ª–µ–π.',
      experienceYears: 16,
      priceMinCents: 8000,
      priceMaxCents: 13000,
      onlineOnly: false,
      city: '–ú–æ—Å–∫–≤–∞',
      verified: true,
      categories: ['physiotherapist']
    }
  ]

  // –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤
  for (const specialist of specialists) {
    const passwordHash = await hash('password123', 11)
    
    const user = await prisma.user.upsert({
      where: { email: specialist.email },
      update: {},
      create: {
        email: specialist.email,
        passwordHash,
        role: 'SPECIALIST',
        status: 'ACTIVE',
        specialistProfile: {
          create: {
            displayName: specialist.displayName,
            bio: specialist.bio,
            experienceYears: specialist.experienceYears,
            priceMinCents: specialist.priceMinCents,
            priceMaxCents: specialist.priceMaxCents,
            onlineOnly: specialist.onlineOnly,
            city: specialist.city,
            verified: specialist.verified,
          }
        }
      },
      include: {
        specialistProfile: true
      }
    })

    // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    for (const categorySlug of specialist.categories) {
      const category = await prisma.category.findUnique({
        where: { slug: categorySlug }
      })
      
      if (category) {
        await prisma.specialistCategory.upsert({
          where: {
            specialistUserId_categoryId: {
              specialistUserId: user.id,
              categoryId: category.id
            }
          },
          update: {},
          create: {
            specialistUserId: user.id,
            categoryId: category.id
          }
        })
      }
    }
  }

  console.log('‚úÖ Specialists seeded successfully!')
}

main()
  .catch((e) => {
    console.error('‚ùå Error seeding:', e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
