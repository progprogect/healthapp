# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ HealthApp

## üìä –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### ‚úÖ 1. Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–§–∞–π–ª—ã**: `src/lib/cache.ts`
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `ioredis`, `jsonwebtoken`
- **–§—É–Ω–∫—Ü–∏–∏**: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –æ—Ç–≤–µ—Ç–æ–≤, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö, unread counters

### ‚úÖ 2. Batch API –¥–ª—è unread counters
- **–§–∞–π–ª**: `src/app/api/me/unread-counts/route.ts`
- **–§—É–Ω–∫—Ü–∏—è**: –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Å—á–µ—Ç—á–∏–∫–æ–≤ –≤ –æ–¥–∏–Ω
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: 30 —Å–µ–∫—É–Ω–¥

### ‚úÖ 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è NextAuth
- **–§–∞–π–ª—ã**: `src/app/api/auth/[...nextauth]/route.ts`, `src/types/next-auth.d.ts`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –ø—Ä–æ—Ñ–∏–ª–∏ –≤ JWT, —É–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã –ª–∏—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î

### ‚úÖ 4. –ò–Ω–¥–µ–∫—Å—ã –ë–î
- **–§–∞–π–ª—ã**: `add_performance_indexes.sql`, `scripts/apply-indexes.js`
- **–ö–æ–º–∞–Ω–¥–∞**: `npm run db:indexes`
- **–ò–Ω–¥–µ–∫—Å—ã**: 12+ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

### ‚úÖ 5. –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–§–∞–π–ª—ã**: `src/components/AppHeader.tsx`, `src/components/navigation/*.tsx`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: React.memo, useMemo –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã –ª–∏—à–Ω–∏–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã

### ‚úÖ 6. Lazy Loading
- **–§–∞–π–ª**: `src/app/specialists/[id]/page.tsx`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: dynamic imports –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: —É—Å–∫–æ—Ä–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü

### ‚úÖ 7. Prefetching –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- **–§–∞–π–ª—ã**: `src/components/navigation/ClientNav.tsx`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: prefetching –ø—Ä–∏ hover
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã

### ‚úÖ 8. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Next.js
- **–§–∞–π–ª**: `next.config.ts`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, code splitting
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: —É–º–µ–Ω—å—à–µ–Ω bundle size

### ‚úÖ 9. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Socket.IO
- **–§–∞–π–ª—ã**: `server.js`, `src/hooks/useChatSocket.ts`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: —É—Å–∫–æ—Ä–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `env.example` –≤ `.env.local` –∏ –¥–æ–±–∞–≤—å—Ç–µ:
```env
# Redis (–¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è)
REDIS_URL="redis://localhost:6379"

# Socket.IO
NEXT_PUBLIC_SOCKET_URL="http://localhost:3001"
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Redis
```bash
# macOS
brew install redis
brew services start redis

# Ubuntu/Debian
sudo apt-get install redis-server
sudo systemctl start redis-server

# Docker
docker run -d -p 6379:6379 redis:alpine
```

### 4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –ë–î
```bash
npm run db:indexes
```

### 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
npm run dev
```

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

- **–°–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–æ–≤**: —Å 2-3 —Å–µ–∫ –¥–æ 200-300–º—Å ‚ö°
- **–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î**: –Ω–∞ 70-80% üìâ
- **–£–º–µ–Ω—å—à–µ–Ω–∏–µ bundle size**: –Ω–∞ 30-40% üì¶
- **–£–ª—É—á—à–µ–Ω–∏–µ UX**: –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã üéØ

## üîß –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis
```bash
redis-cli ping
redis-cli info memory
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤ –ë–î
```sql
-- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
SELECT schemaname, tablename, indexname, indexdef 
FROM pg_indexes 
WHERE indexname LIKE 'idx_%' 
ORDER BY tablename, indexname;
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
–û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API `/api/me/unread-counts`
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Redis –∑–∞–ø—É—â–µ–Ω: `redis-cli ping`
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ memory cache

### –ò–Ω–¥–µ–∫—Å—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤—Ä—É—á–Ω—É—é: `psql -d healthapp -f add_performance_indexes.sql`

### Socket.IO –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `NEXT_PUBLIC_SOCKET_URL`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –¥–æ–±–∞–≤—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
2. **CDN**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
3. **Service Worker**: –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è API –∑–∞–ø—Ä–æ—Å–æ–≤
4. **Database connection pooling**: –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
5. **Rate limiting**: –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
4. –î–æ–±–∞–≤—å—Ç–µ Service Worker
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏

